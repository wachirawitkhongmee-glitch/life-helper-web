<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>LifeFix Admin</title>
<style>
body{font-family:tahoma;background:#ECEFF1;text-align:center;}
.box{max-width:500px;margin:30px auto;background:white;padding:20px;border-radius:20px;box-shadow:0 4px 15px rgba(0,0,0,.2);}
h2{color:#1976D2}
.item{background:#E3F2FD;margin:10px;padding:10px;border-radius:12px;text-align:left;}
.badge{float:right;background:#1976D2;color:white;padding:2px 10px;border-radius:20px;font-size:12px;}
</style>
</head>
<button onclick="localStorage.removeItem('admin');location.href='login.html'"
style="float:right;margin:15px;padding:8px 20px;border-radius:20px;border:none;background:#E53935;color:white;">
‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
</button>

<body>

<div class="box">
<h2>üì• ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤</h2>
<div id="list"></div>

<hr>

<h3>üìä ‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡∏™‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</h3>
<div id="stat"></div>
</div>

<script>
    if(localStorage.getItem("admin")!=="yes"){
 location.href="login.html";
}

let data = JSON.parse(localStorage.getItem("userProblems")||"[]");
let list=document.getElementById("list");
let stat={};

if(data.length==0){
 list.innerHTML="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
}else{
 data.reverse().forEach(x=>{
  list.innerHTML+=`<div class="item"><b>${x.text}</b><span class="badge">${x.cat}</span><br><small>${x.time}</small></div>`;
  stat[x.cat]=(stat[x.cat]||0)+1;
 });
}

let maxCat="-",max=0;
for(let k in stat){
 if(stat[k]>max){max=stat[k];maxCat=k;}
}
document.getElementById("stat").innerText = maxCat+" ("+max+" ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)";
</script>

</body>
</html>
